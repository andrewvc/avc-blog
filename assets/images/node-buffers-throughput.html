<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml" lang="en">
  <head>
      <meta http-equiv="X-UA-Compatible" content="chrome=1" />
      <meta name="width" content="500" />
      <meta name="generator" content="Posterous" />
      <script src="/javascripts/vendor/modernizr.custom.09241.js?1336436527" type="text/javascript"></script>
      <!--[if lt IE 9]>
        <script src="/javascripts/innershiv.js?1336436527" type="text/javascript"></script>
      <![endif]-->
      <link href="/bundles/posts.css" media="screen" rel="stylesheet" type="text/css" />
      <!--[if lt IE 9]>
        <link href="/bundles/ie.css" media="screen" rel="stylesheet" type="text/css" />
      <![endif]-->
      <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/andrewvc"/>
      <meta name="medium" content="image" /><link rel="image_src" href="http://getfile2.posterous.com/getfile/files.posterous.com/temp-2010-04-29/eEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk/node_buf_performance.png.thumb100.png" />
      <script type="text/javascript">
//<![CDATA[
window._token = 'dVBAEqeE/wwhALWWN1MbA1FFiQi71I1sRLd4gudVz2o='; beforeload = (new Date()).getTime(); pagetype = 'show';
//]]>
</script>
      <script src="/bundles/sites_initialization.js" type="text/javascript"></script>
      <script type="text/javascript">
//<![CDATA[
var $j = jQuery.noConflict();
//]]>
</script>
      <script type="text/javascript">
//<![CDATA[
var POSTEROUS_HOSTNAME = 'posterous.com'
//]]>
</script>
      <script data-post-data="%7B%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22node-js-and-binary-data%22%2C%22post_id%22%3A17801526%2C%22user_id%22%3A268865%7D" data-posterous-deferred-content-url="http://blog.andrewvc.com/posts/deferred_content.jsonp" data-posts-data="%5B%7B%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22node-js-and-binary-data%22%2C%22post_id%22%3A17801526%2C%22user_id%22%3A268865%7D%5D" id="posterous_initialization_script" src="/javascripts/initialize.js?1336436527" type="text/javascript"></script>
      
    <script src="/bundles/tags.js" type="text/javascript"></script><link rel="canonical" href="http://blog.andrewvc.com/node-js-and-binary-data" />
    <meta charset="utf-8" />
    
    
  	
  		
  	
  		
  	
  	
  	<link href="/images/favicon.png" rel="icon" type="image/x-png" />
  	
  	<title>Node JS and Binary Data - Andrew Cholakian's Blog</title>
<link href="/themes/cleansheet/styles.css" rel="stylesheet" type="text/css" />
  	<style>
    	/* global styles */
    	body, html { text-align: center; width: 100%; height: 100%; margin: 0; padding: 0; background-color: #FFF; font-family: Arial, Helvetica, sans-serif; color: #424037; }
    	
    	a { color: #BC7134; text-decoration: none; }
    	a[name] { color: #999; text-decoration: none; }
    
    	article header h1 a { color: #444; }
    	article header h1 a:hover { color: #999; text-decoration: none; }
    	
    	header#page_header hgroup { margin-top: 40px; #999; display: block; }
    	header#page_header hgroup a { color: #999; }
    	header#page_header hgroup h2 { margin: 10px 0 30px; font-size: 1.4em; font-weight: normal; color: #999; letter-spacing: 0px;}
    	
      nav#navigation ul li a.current { color: #999; }
      
      section#extra_links h1 span { letter-spacing: 0; display: block; font-size: 10px; font-weight: normal; color: #999; }
      section#extra_links ul { color: #999; font-size: 10px; }
      
      form.search input.text { font-size: 12px; padding: 2px 2px 2px 20px; border: 1px solid #ccc; background: #FFF url('/images/icons/search16.png') no-repeat 3px 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; }
      
      aside#sidebar { float: right; width: 175px; margin-top: 20px; font-size: 1.2em; color: #999; }
      aside#sidebar section h1 { font-size: 11px; font-weight: normal; color: #999; letter-spacing: 0; }
      aside#sidebar section ul li { list-style: none; color: #999; }
      
      section#statistics { font-size: 10px; color: #999; }
      section#statistics strong { color: #424037; }

      section#tags li.selected a { color: #424037; }
            
      h2#archive_list {margin-top: 0px; color: #111;}
      section#archives {display:block;}
      section#archives div.inner {margin-left:10px;line-height:1.5em;} 
      section#archives div.year {margin-top:5px;margin-bottom:5px;}
      
      article header aside.sms { font-size: 11px; color: #999; }
      
      div.editbox a { color: #999; }
    	div.editbox a:hover { color: #BC7134; }
      
      article time a { font-size: 14px; color: #C6C1A5; }
      
      footer section.author { width: 500px; margin-left: 155px; float: none; margin-bottom: 15px; }
      footer section.author h1 { font-size: 10px; font-weight: normal; color: #999; margin: 0 0 5px; }
      footer section.author h1 a { color: #999; }
      footer section.author:hover h1 a { color: #BC7134; text-decoration: none; }
      
    	div.comment_label { float: left; width: 130px; color: #C6C1A5; font-size: 14px; padding-top: 2px; margin-top: 0px; text-align: right; }
    	div.comment_spacer { float: left; width: 130px; color: #999; font-size: 14px; padding-top: 14px; text-align: right; display: block; }
    	div.comment_date { color: #C6C1A5; font-size: 14px; }
    	div.commentunit { margin: 10px 0px; color: #424037; }

      footer section.locations h1 { font-size: 11px; font-weight: normal; color: #999; line-height: 21px; margin-top: 0px; }
    
    	.pagination a:hover, .pagination a:active { border: 1px solid #ca9d00; color: #BC7134; }
    	.pagination span.current { padding: 2px 5px; margin: 2px; font-weight: bold; border: 1px solid #BC7134; background-color: #BC7134; color: #FFF; }
    	
    	input, select, textarea { color: #444; font-size: 1.6em; font-family: "Lucida Grande", sans-serif; 
    		line-height:1.3em !important; padding: 5px; }
    	input[type='text'], input[type='password'], select, textarea { background-color: #FFF; border: 1px solid #ccc; }
    	input[type='button'], input[type='submit'] { height: 2em; font-size: 1.4em; color: #444; margin-top: 10px; }
    	
    	#rss { margin: 10px 0px; }
    	
      footer section.share, footer section.tags, footer section.locations { margin-bottom: 15px; }
      footer section.share { margin-bottom: 18px; float: right; width: auto; margin: 10px 0 0; }
      .p_response_widget { float: left; }
      .p_response_container { clear: both; }
      
      div.posterous_tweet_button { margin-right: 0; }
    	header#page_header hgroup { margin-top: 30px; }
  	</style>
  </head>
  <body><div class="posterous_site_data" data-post-id="17801526" data-posterous-hostname="posterous.com" data-show-type="post" data-site-id="670799" data-site-is-private="false" data-site-location="false" data-site-type="posterous" data-slug-id="node-js-and-binary-data" data-user-id="268865"></div><div class="posterous_ojs" data-posterous-admin-box="true"></div><div class="posterousPrivateBox">
	
	
</div>
      <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId  : '6694405826',
              status : true, // check login status
              cookie : true, // enable cookies to allow the server to access the session
              xfbml  : true, // parse XFBML
              oauth  : true

            });
            
          };

          (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = 'http://connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
          }());
        </script>
    
    <div id="wrap">
      <aside class="clearfix" id="posterous_header">
        <div id="pbar">
        				<noscript>
  <div id="posterousbar_nojs">
    <a href="http://posterous.com/"><img src="/images/header/yellow.png" alt="Posterous" /></a>
  </div>
</noscript>
              </div>
      </aside>
      <header id="page_header">
        
          <hgroup>
            <h1><a href="http://blog.andrewvc.com" title="Andrew Cholakian's Blog" rel="index">Andrew Cholakian's Blog</a></h1>
            
              <h2></h2>
            
          </hgroup>
        
        
    		<section id="extra_links">
          
            <a href="http://blog.andrewvc.com" class="back_to_blog" rel="up">&laquo; Back to posts</a>
          
          
          
          
          
        </section>
      </header>
      <aside id="sidebar">
        
        
          <section id="statistics">
            <ul>
              <li>Viewed <strong><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="17801526"></div> times</strong></li>
            </ul>
          </section>
          
                
                  
            <section id="tags">
              <h1>Filed under</h1>
              <ul>
                
              
                
                  <li><a href="/tag/code" rel="tag">code</a></li>
                
              
                
                  <li><a href="/tag/nodejs" rel="tag">nodejs</a></li>
                
              
            
              </ul>
            </section>
          
                
              
        
        
      </aside>
      <div id="articles">
        
          <article class="post clearfix" id="post_17801526">
            <header>
              <section>
                
                  <time pubdate="pubdate" datetime="2010-04-29"><a href="http://blog.andrewvc.com/node-js-and-binary-data">April 29, 2010</a></time>
                
                
              </section>
              
                <h1 class="post-title"><a href="http://blog.andrewvc.com/node-js-and-binary-data">Node JS and Binary Data</a></h1>
              
              
      	        
            
              <div class="editbox">
                
        				
                  
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="17801526">
	
	<li><a href="http://posterous.com/posts/edit/17801526">Edit</a></li>
  <li><a href="/posts/destroy/17801526" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'dVBAEqeE/wwhALWWN1MbA1FFiQi71I1sRLd4gudVz2o='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/17801526/tags/edit_multiple" data-post-id="17801526" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=17801526" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
              
              </div>
            </header>
            <div class="body">
              <div class="inner">
                <p><strong>UPDATE:</strong> None of this should be necessary, as FileReadStream in the latest node uses buffers by default. However, it appears that either I'm doing something wrong or the docs are out of date, as it doesn't work that way on node HEAD.</p>
<p>Two areas where the exclenned Node.js's sadly lacks is the handling of binary data and large strings. In this post I'd like to go over some techniques for dealing with binary data in node, most of which revolves around dealing with V8's garbage collector, and the fact that strings in node are not made for binary data, they're made for UTF-8 and UTF-16 data.</p>
<p>There are three main gory details that make working with data in Node.js a pain:</p>
<ol>
<li>Large Strings (&gt; ~64K) are not your friend.</li>
<li>Binary (and ASCII) data in a node string are stored as the first byte of a UTF-16  string.</li>
<li>Binary data can be most efficiently stored in Node.js as a <a href="http://nodejs.org/api.html#buffers-3">Buffer</a> </li>
</ol>
<p>Lets look at the first item, big strings aren't your friend. Node.js creator ry himself <a href="http://nodejs.org/jsconf2010.pdf">tackled this issue himself</a> in a performance comparison he made with nginx. If you view the pdf, (or look at the extracted chart below) you'll see that node does a decent job keeping pace with nginx up until the 64 byte mark hits, then performance just falls apart. The reason, in ry's words:</p>
<blockquote class="posterous_short_quote">
<p>V8 has a generational garbage collector [which] moves objects around randomly. Node can’t get a pointer to raw string data to write to socket.</p>
</blockquote>
<p>You can see this in the relevant graph in ryan's <a href="http://nodejs.org/jsconf2010.pdf">slides</a>, which I've conveniently extracted and posted below (I hope you don't mind Ryan).</p>
<p> </p>
<p><div class='posterousGalleryMainDiv p_embed p_image_embed' data-posterous-file-list='%5B%7B%22large%22%3A%22http%3A%2F%2Fgetfile8.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-05-01%2FuGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD%2Fry-node.png.scaled1000.png%22%2C%22originalWidth%22%3A%222232%22%2C%22largeWidth%22%3A%221000%22%2C%22thumb%22%3A%22http%3A%2F%2Fgetfile0.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-05-01%2FuGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD%2Fry-node.png.thumb.png%22%2C%22originalHeight%22%3A%22964%22%2C%22largeHeight%22%3A%22432%22%2C%22thumbWidth%22%3A%2236%22%2C%22height%22%3A%22216%22%2C%22main%22%3A%22http%3A%2F%2Fgetfile7.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-05-01%2FuGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD%2Fry-node.png.scaled500.png%22%2C%22thumbHeight%22%3A%2236%22%2C%22originalSize%22%3A%22160%22%2C%22original%22%3A%22http%3A%2F%2Fgetfile6.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-05-01%2FuGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD%2Fry-node.png%22%2C%22width%22%3A%22500%22%7D%5D' data-posterous-image-gallery-initialized='false' data-posterous-image-gallery='true' data-posterous-options='%7B%22zipFile%22%3Anull%2C%22zipFileSize%22%3Anull%2C%22external_url%22%3Anull%2C%22showDownload%22%3Atrue%2C%22url_slug%22%3A%22node-js-and-binary-data%22%7D'>
<a href="http://getfile8.posterous.com/getfile/files.posterous.com/temp-2010-05-01/uGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD/ry-node.png.scaled1000.png"><img alt="Ry-node" height="216" src="http://getfile7.posterous.com/getfile/files.posterous.com/temp-2010-05-01/uGaAEjcnjwknberfGdhIImApBrdDfpbzfFeFiDAjejEaqftFvJtmwncuqfrD/ry-node.png.scaled500.png" width="500" /></a>

</div>
</p>
<p>What wasn't immediately obvious to me after reading this was what this meant in cases where one was using node to pass around large bits of binary data that come in as strings. if you use node to say, read from the file system you get back a binary string, not a buffer. My question was: <strong>"If I have binary data already stuck in a lousy UTF-16 string, but then stick it in buffer before sending it out, will that help with speed?."</strong> The answer an <strong>increase in throughput from 100 MiB/Sec to 160 MiB/Sec</strong>.</p>
<p> </p>
<p>Check out the graph below from my own performance tests, where I played with different readChunk sizes (how much data the FileReadStream reads at once and buffer sizes (How much data we store in a buffer before flushing to a socket):</p>
<p><div class='posterousGalleryMainDiv p_embed p_image_embed' data-posterous-file-list='%5B%7B%22large%22%3A%22http%3A%2F%2Fgetfile1.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-04-29%2FeEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk%2Fnode_buf_performance.png.scaled1000.png%22%2C%22originalWidth%22%3A%22665%22%2C%22largeWidth%22%3A%22665%22%2C%22thumb%22%3A%22http%3A%2F%2Fgetfile4.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-04-29%2FeEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk%2Fnode_buf_performance.png.thumb.png%22%2C%22originalHeight%22%3A%22352%22%2C%22largeHeight%22%3A%22352%22%2C%22thumbWidth%22%3A%2236%22%2C%22height%22%3A%22265%22%2C%22main%22%3A%22http%3A%2F%2Fgetfile0.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-04-29%2FeEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk%2Fnode_buf_performance.png.scaled500.png%22%2C%22thumbHeight%22%3A%2236%22%2C%22originalSize%22%3A%2219%22%2C%22original%22%3A%22http%3A%2F%2Fgetfile7.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Ftemp-2010-04-29%2FeEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk%2Fnode_buf_performance.png%22%2C%22width%22%3A%22500%22%7D%5D' data-posterous-image-gallery-initialized='false' data-posterous-image-gallery='true' data-posterous-options='%7B%22zipFile%22%3Anull%2C%22zipFileSize%22%3Anull%2C%22external_url%22%3Anull%2C%22showDownload%22%3Atrue%2C%22url_slug%22%3A%22node-js-and-binary-data%22%7D'>
<a href="http://getfile1.posterous.com/getfile/files.posterous.com/temp-2010-04-29/eEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk/node_buf_performance.png.scaled1000.png"><img alt="Node_buf_performance" height="265" src="http://getfile0.posterous.com/getfile/files.posterous.com/temp-2010-04-29/eEggEoctHDxznBhbvnjiEtrlcdDjrvamdHiFsqEFsmwCBbdifrDHfwrBivnk/node_buf_performance.png.scaled500.png" width="500" /></a>

</div>
</p>
<p>As you can see performance using buffers (Buf) beats the pants off writes using strings (Str). The difference between the two pieces of code can be seen below. I initially didn't think that doing this conversion would help at all, I figured once it was already in a string (as data from a FileReadStream is), one may as well flush it to the socket and continue on. This makes me wonder if other apps would also be best off accumulating their output (perhaps even their UTF-8 output) in a Buffer where possible, then finally flushing the Buffer, instead of making repeat calls to res.write. Someone needs to test this. Additionally, this makes me wonder if further improvements to my own test case could be improved if the node FileReadStream object was modified to return a Buffer rather than a string.</p>
<p>Additionaly, you may be asking about using a larger bufSize than readChunk size, which I did indeed test, but found there was not much of a difference when using a larger buffer, so the optimal strategy really does seem to be reading a 64KiB chunk into a 64KiB buffer. You can see this data at the bottom of the post.</p>
<p>In the data I graphed above, I made a number of runs with `ab -c 100 -n 1000` against 1 MiB file changing the chunkSize and readSize. Relevant sample code can be seen below. The full sample code would be <a href="http://github.com/andrewvc/node-paperboy/commit/c50d4e48eeda1fea4d1ebe84ebf080cb3a441ce7">my fork of node-paperboy</a>. </p>
<p><script src="https://gist.github.com/384706.js"></script></p>
<p> </p>
<p>The full performance data is available below:</p>
<p> </p>
<p><div class='p_embed p_file_embed'>
<div class='p_scribd_embed' data-posterous-scribd-embed='false' data-posterous-url='http://getfile6.posterous.com/getfile/files.posterous.com/temp-2010-04-29/pyhkrbepfFioFhHotslsevgHxjIdpeBxyzctHlvigjhmdtdsCrHpdigpzAJI/node-performance.pdf' data-posterous-user-id='user268865'>

      <div class='downloadFlyout'>
       <div class="downloadIcon"><a href='http://getfile6.posterous.com/getfile/files.posterous.com/temp-2010-04-29/pyhkrbepfFioFhHotslsevgHxjIdpeBxyzctHlvigjhmdtdsCrHpdigpzAJI/node-performance.pdf'><img src='http://posterous.com/images/filetypes/pdf.png' style='border: none;'/></a></div>
       <div class="downloadlinkInstructions">Click here to download:</div>
       <strong><a href='http://getfile6.posterous.com/getfile/files.posterous.com/temp-2010-04-29/pyhkrbepfFioFhHotslsevgHxjIdpeBxyzctHlvigjhmdtdsCrHpdigpzAJI/node-performance.pdf'>node-performance.pdf</a></strong> <span class="downloadSize">(24 KB)</span>
       <br class="clearboth"/></div>
      
</div>


        <span id='gqszfBhvFv_wrapper'>      
        <span class='downloadlink'>(<a href="#" onclick="$('gqszfBhvFv').toggle();return false;">download</a>)</span><br/>
        <div id='gqszfBhvFv' style='display:none' class='downloadFlyout'>
        <div class="downloadIcon"><a href='http://getfile6.posterous.com/getfile/files.posterous.com/temp-2010-04-29/pyhkrbepfFioFhHotslsevgHxjIdpeBxyzctHlvigjhmdtdsCrHpdigpzAJI/node-performance.pdf'><img src='http://posterous.com/images/filetypes/pdf.png' style='border: none;'/></a></div>
        <div class="downloadlinkInstructions">Click here to download:</div>
        <strong><a href='http://getfile6.posterous.com/getfile/files.posterous.com/temp-2010-04-29/pyhkrbepfFioFhHotslsevgHxjIdpeBxyzctHlvigjhmdtdsCrHpdigpzAJI/node-performance.pdf'>node-performance.pdf</a></strong> <span class="downloadSize">(24 KB)</span>
        <br class="clearboth"/></div>
        </span>
        <script type='text/javascript'>
          if (!FlashDetect.installed) {
            $('gqszfBhvFv_wrapper').hide();
          }
        </script>
      
</div>
</p>
<p> </p>
              </div>
            </div>
            <footer>
              
              
              
            
              
                
              
            
                
              <aside class="p_responses light">
                
                  
                 
              
                
                    <section class="share">
                      <div class="facebook_like">
                          
                
                  <fb:like href="http://blog.andrewvc.com/node-js-and-binary-data" layout="button_count" show_faces="true" width="" action="like" font="lucida grande" colorscheme="light" ref=""></fb:like>
                
              
            </div>
                      
                          
                
                  <div class="posterous_tweet_button">
                    <a href="http://twitter.com/share" class="posterous_tweet_button twitter-share-button"
                      data-url="http://post.ly/e9wc"
                      data-counturl="http://blog.andrewvc.com/node-js-and-binary-data"
                      data-via="andrewvc"
                      data-text="Node JS and Binary Data"
                      data-count="horizontal"
                      data-related="posterous:Posterous is the place to post everything."
                      data-lang="en">Tweet</a>
                  </div>
                
              
            
                    </section>
                  
              
            
          
                  

                  
                    <nav class='p_response_widget'>
<ul class='clearfix'>
<li class='p_responses_link'><a href="/responses/recent?post_id=17801526" data-posterous-response-count="17801526" data-response-post-id="17801526" title="View responses to this post"><strong>0</strong> responses</a></li>
<li class='p_like_link'><a href="/likes/create?like_type=post&amp;post_id=17801526" class="like_post" data-like-url="/likes/create?like_type=post&amp;post_id=17801526" data-posterous-like-button-for-post-id="17801526" data-posterous-like-text="Like this post" data-posterous-like="true" data-posterous-unlike-text="Unlike this post" data-unlike-url="/likes/delete?like_type=post&amp;post_id=17801526" rel="nofollow" title="Like this post"><div class='p_like_icon'></div><div class='p_unlike_icon' style='display:none'></div><span>Like</span></a></li>
<li class='p_comment_link'><a href="/responses/recent?post_id=17801526" data-comment-post-id="17801526" title="Comment on this post"><div>Comment</div></a></li>
</ul>
</nav>

                		<div data-posterous-responses-for-post-id='17801526'>
<div class='p_response_container'>
<a name='comment'></a>
<div class='p_responses_list clearfix' data-posterous-responses-container>
</div>
</div>
</div>

                		<div class="posterous_ojs" data-posterous-new-comment-form="true"></div>
                  
                
              </aside> 
        		
              
            </footer>
          </article>
        
      </div>
      
    </div>
  

  
      <script type="text/javascript">
    	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    	</script>
    	<script type="text/javascript">
    	var pageTracker = _gat._getTracker("UA-4054156-1");
    	pageTracker._setDomainName("none");
    	pageTracker._setAllowLinker(true);
    	pageTracker._setAllowHash(false);
    	pageTracker._initData();
    	pageTracker._trackPageview();
    	</script>
    
  
  <!-- Quantcast Tag --> 
  <script type="text/javascript">
    var _qevents = _qevents || [];
    _qevents.push( { qacct:"p-16ewveTurfCCM"} );
  </script>
  <script type="text/javascript" src="//edge.quantserve.com/quant.js" async></script>
  <noscript>
  <div style="display: none;"><img src="https://pixel.quantserve.com/pixel/p-16ewveTurfCCM.gif" height="1" width="1" alt="Quantcast"/></div>
  </noscript>
  <!-- End Quantcast tag -->


	<script type="text/javascript">
		try {
			var pageTrackerUser = _gat._getTracker("UA-17399267-1");
			pageTrackerUser._trackPageview();
		} catch (err) {}
	</script>


<script src="http://www.scribd.com/javascripts/view.js" type="text/javascript"></script>
<script src="/bundles/sites_views.js" type="text/javascript"></script>
<script src="/bundles/sites.js" type="text/javascript"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js" defer></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script>
	var fbid_site_owner = 1;
</script>



<div class="posterous_ojs" data-posterous-twitter-oauth="true" data-posterous-post-ids="%7B%2217801526%22%3A%22http%3A%2F%2Fblog.andrewvc.com%2Fnode-js-and-binary-data%22%7D" data-posterous-redirect-url="http://posterous.com/oauth/init_oauth_and_redirect/?ssod=blog.andrewvc.com&oauth_provider_type="></div>
<script src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js" type="text/javascript"></script>
<iframe src="http://posterous.com/analytics_tracker" style="height: 1px; width: 1px; display: none;"></iframe>

      <script type="text/javascript">
        null_fn = function () {};
        var mpmetrics = { track_links: null_fn, track: null_fn, track_funnel: null_fn, register: null_fn, register_once: null_fn, register_funnel: null_fn };
      </script>
    </body>
</html>

